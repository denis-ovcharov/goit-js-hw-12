{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport { PAGE_SIZE } from '../main.js';\n\n\n\nexport async function getImagesByQuery(query, currentPage) {\n    const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: '50466269-2b1f45a47ffe964456016cff3',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: currentPage,\n            per_page: PAGE_SIZE\n        }\n  \n\n    });\n    return response.data;\n}","import { refs } from \"../main\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { currentPage, totalPages } from '../main.js';\n\n//!===============================================================================\nexport function createGallery(images) {\n    const markup = images.map((image) => \n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <ul class=\"image-info\">\n          <li class=\"info\">Likes<p>${image.likes}</p></li>\n          <li class=\"info\">Views<p>${image.views}</p></li>\n          <li class=\"info\">Comments<p>${image.comments}</p></li>\n          <li class=\"info\">Downloads<p>${image.downloads}</p></li>\n        </ul>\n      </li>`\n    ).join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  const simpleLightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n    simpleLightbox.refresh();\n}\n//!===============================================================================\n\nexport function clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n//!===============================================================================\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n//!===============================================================================\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n//!===============================================================================\nexport function showLoadMoreButton() {\n  refs.loadMoreBtn.classList.remove('hidden');\n}\n//!===============================================================================\nexport function hideLoadMoreButton() {\n  refs.loadMoreBtn.classList.add('hidden');\n}\n//!===============================================================================\nexport function checkBtnStatus() {\n  if (currentPage < totalPages) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n  }\n}\n//!===============================================================================","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    checkBtnStatus\n} from './js/render-functions.js';\n//!===============================================================================\nexport const refs = {\n    form: document.querySelector('.form'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMoreBtn: document.querySelector('.load-more-btn')\n}\n //!===============================================================================\nlet query;\nexport let currentPage;\nexport let totalPages;\nexport const PAGE_SIZE = 15;\n//!===============================================================================\nrefs.form.addEventListener('submit', async e => {\n    e.preventDefault();\n    query = refs.form.elements.search.value.trim();\n    currentPage = 1;\n    checkBtnStatus();\n    if (!query) {\n        return;\n    }\n    clearGallery();\n    showLoader();\n    \n    await loadImages(query, currentPage);\n    e.target.reset();\n});\n\n//!===============================================================================\n    async function loadImages(query,currentPage) {\n        try {\n            const res = await getImagesByQuery(query, currentPage);\n\n            if (res.hits.length === 0) {\n                iziToast.error({\n                    title: \"Error\",\n                    message: \"Sorry, there are no images matching your search query. <br>Please try again!\",\n                    position: 'topRight',\n                });\n                \n                return;\n            }\n            createGallery(res.hits);\n\n            totalPages = Math.ceil(res.total / PAGE_SIZE);\n            checkBtnStatus();\n            \n        } catch (err) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Something went wrong. Please try again.\",\n                position: 'topRight',\n            });\n            console.error('API error:', err);\n        } finally {\n            hideLoader();\n        }\n}\n//!===============================================================================\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    checkBtnStatus();\n    await loadImages(query,currentPage);\n})\n//!==============================================================================="],"names":["getImagesByQuery","query","currentPage","axios","PAGE_SIZE","createGallery","images","markup","image","refs","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","checkBtnStatus","totalPages","e","loadImages","res","iziToast","err"],"mappings":"owBAKO,eAAeA,EAAiBC,EAAOC,EAAa,CAcvD,OAbiB,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUE,CACb,CAGT,CAAK,GACe,IACpB,CCfA;AACO,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAKE,GACvB;AAAA,wCACgCA,EAAM,aAAa;AAAA,4CACfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,qCAG7CA,EAAM,KAAK;AAAA,qCACXA,EAAM,KAAK;AAAA,wCACRA,EAAM,QAAQ;AAAA,yCACbA,EAAM,SAAS;AAAA;AAAA,YAGxD,EAAM,KAAK,EAAE,EAEXC,EAAK,QAAQ,mBAAmB,YAAaF,CAAM,EAE5B,IAAIG,EAAe,aAAc,CACtD,aAAc,MACd,aAAc,GAClB,CAAG,EAEgB,QAAO,CAC1B,CACA;AAEO,SAASC,GAAe,CAC7BF,EAAK,QAAQ,UAAY,EAC3B,CACA;AACO,SAASG,GAAa,CAC3BH,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CACA;AACO,SAASI,GAAa,CAC3BJ,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CACA;AACO,SAASK,GAAqB,CACnCL,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC5C,CACA;AACO,SAASM,GAAqB,CACnCN,EAAK,YAAY,UAAU,IAAI,QAAQ,CACzC,CACA;AACO,SAASO,GAAiB,CAC3Bd,EAAce,EAChBH,IAEAC,GAEJ,CACA;ACjDA;AACO,MAAMN,EAAO,CAChB,KAAM,SAAS,cAAc,OAAO,EACpC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,gBAAgB,CACxD,EACA;AACA,IAAIR,EACOC,EACAe,EACJ,MAAMb,EAAY,GACzB;AACAK,EAAK,KAAK,iBAAiB,SAAU,MAAMS,GAAK,CAC5CA,EAAE,eAAc,EAChBjB,EAAQQ,EAAK,KAAK,SAAS,OAAO,MAAM,OACxCP,EAAc,EACdc,IACKf,IAGLU,IACAC,IAEA,MAAMO,EAAWlB,EAAOC,CAAW,EACnCgB,EAAE,OAAO,QACb,CAAC,EAED;AACI,eAAeC,EAAWlB,EAAMC,EAAa,CACzC,GAAI,CACA,MAAMkB,EAAM,MAAMpB,EAAiBC,EAAOC,CAAW,EAErD,GAAIkB,EAAI,KAAK,SAAW,EAAG,CACvBC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+EACT,SAAU,UAC9B,CAAiB,EAED,MACH,CACDhB,EAAce,EAAI,IAAI,EAEtBH,EAAa,KAAK,KAAKG,EAAI,MAAQhB,CAAS,EAC5CY,GAEH,OAAQM,EAAK,CACVD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,0CACT,SAAU,UAC1B,CAAa,EACD,QAAQ,MAAM,aAAcC,CAAG,CAC3C,QAAkB,CACNT,GACH,CACT,CACA;AAEAJ,EAAK,YAAY,iBAAiB,QAAS,SAAY,CACnDP,GAAe,EACfc,IACA,MAAMG,EAAWlB,EAAMC,CAAW,CACtC,CAAC,EACD;"}